<%= render partial: 'shared/page_title', :locals => {:heading => 'All registered users'} %>

<p class="subtitle">All registered users as of today, their collective votes and posts</p>

<div class="row col-md-12">
  <% if @users.count == 0 %>
    <div class="well text-center box-shadow">
      <h4>It's just you, my friend</h4>
      <p>
        It's a lonely road.<br>
        Go invite your buddies to join!
      </p>
    </div>
  <% else %>
    <table class="table table-striped table-condensed">
      <thead>
        <tr>
          <th>UserName</th>
          <th>Joined</th>
          <th class="text-right">Total Votes</th>
          <th class="text-right"># of Posts</th>
          <th class="text-center">Action</th>
        </tr>
      </thead>
      <tbody>
      <% @users.each do |user| %>
        <tr>
          <td><%= user.username %></td>
          <td><%= user.created_at %></td>
          <td class="text-right"><%= user.votes.count %></td>
          <td class="text-right"><%= user.questions.count + user.blurbs.count %></td>
          <td class="text-center"><%= link_to(user, { method: :delete, 
                                                      data: { confirm: 'Are you sure?' },
                                                      'data-toggle' => 'tooltip'},
                                                      'title' => 'Delete this user') do %>
              <i class="fa fa-remove fa-x2"></i>
            <% end %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
  <% end %>
</div>
